# 프로젝트와 mysql 연결
- mysql connector jar download [mesql version] 을 다운로드 받는다.
- 압축파일을 C:/lib 폴더에 위치시킨다.
- 이클립스에서 프로젝트 우클릭 > build Path > Libraries > Add External Jars > C:/lib 선택
- 이클립스에서 프로젝트 우클릭 > build Path > Libraries > Deployment Assembly > Add > Java Build Path Entries > mysql.jar 추가

# 서블릿에서 DB 조회하기
```java
@SuppressWarnings("serial")
@WebServlet("/member/list")
public class MemberListServlet extends HttpServlet {

	
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		
		Connection conn = null;
		Statement stmt = null;
		ResultSet rs = null;
		
        // DB 데이터를 사용할때는 반드시 try-catch 문으로 감싸줘야 한다.
		try {
			DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());
			conn= DriverManager.getConnection("jdbc:mysql://localhost/bluedb","root","1234");
			System.out.println(conn);

			stmt = conn.createStatement();
			rs =stmt.executeQuery("select MNO, MNAME, EMAIL,CRE_DATE FROM MEMBERS ORDER BY MNO ASC" );
			
            // 가져온 데이터 출력
            response.setContentType("text/html ;charset=UTF-8");
            PrintWriter out = response.getWriter();
			out.println("<html><head><title>회원목록</title></head>");
			out.println("<body><h1>회원 목록</h1>");
			while(rs.next()) {
				out.println(
						rs.getInt("mno") + "," + 
						rs.getString("mname") + "," + 
						rs.getString("email") + "," +
						rs.getDate("cre_date") + "<br>"
						);
			}
			out.println("</body></html>");
		} catch(Exception e) {

		} finally {
			
		}
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		doGet(request, response);
	}

}
```

## 서블릿에서 DB 수정하기
```java
@SuppressWarnings("serial")
@WebServlet("/member/add")
public class MemberAddServlet extends HttpServlet {
	
	@Override
	protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
		Connection conn = null;
		PreparedStatement stmt = null;
		
		try {
			DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());
			conn = DriverManager.getConnection("jdbc:mysql://localhost/bluedb", "root", "1234");
			System.out.println(" 추가 post connection 객체 " + conn);
			stmt = conn.prepareStatement("insert into members (email, pwd, mname, cre_date, mod_date)" + 
					" values(?,?,?,now(),now())");	// ?는 준비한 후 나중에 채운다(prepare)
			stmt.setString(1,  req.getParameter("email"));		// 1번 물음표를 채운다
			stmt.setString(2,  req.getParameter("password"));	// 2번 물음표를 채운다
			stmt.setString(3,  req.getParameter("name"));		// 3번 물음표를 채운다
			stmt.executeUpdate(); // 최종 적용(update) 한다.
			
			/* 결과 출력 */
			resp.setContentType("text/html; charset=UTF-8");
			PrintWriter out = resp.getWriter();
			out.println("<html><head><title>회원등록 결과</title></head>");
			out.println("<body><p>등록 성공입니다.</p></body></html>");
			
		} catch(Exception e) {
			throw new ServletException(e);
			
		} finally {
			try {if(stmt!=null) stmt.close();} catch(Exception e) {}
			try {if(conn!=null) stmt.close();} catch(Exception e) {}
		}
	}
}
```